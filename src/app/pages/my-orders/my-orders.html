<header class="header-principal">
  <div class="container">
    <div class="header-content">
      <div class="logo-section">
        <svg class="logo-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="8" r="4"></circle>
          <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path>
        </svg>
        <h1 class="logo-text">Mi Cuenta</h1>
      </div>
      <div class="user-actions">
        <a routerLink="/" class="btn btn-outline">Ver Tienda</a>
        <button (click)="logout()" class="btn btn-secondary">Cerrar Sesión</button>
      </div>
    </div>
  </div>
</header>

<main class="main-content">
  <div class="container">
    <div class="admin-layout">
      <aside class="admin-sidebar">
        <div class="user-profile-card">
          <div class="user-avatar">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="8" r="4"></circle>
              <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path>
            </svg>
          </div>
          <div class="user-info">
            <h3>{{ nombreUsuario }}</h3>
            <p>{{ emailUsuario }}</p>
          </div>
        </div>

        <nav class="admin-nav">
          <a routerLink="/mis-pedidos" class="admin-nav-item active">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
            </svg>
            Mis Pedidos
          </a>
          <button (click)="logout()" class="admin-nav-item logout-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Cerrar Sesión
          </button>
        </nav>
      </aside>

      <main class="admin-content">
        <div class="admin-header">
          <div>
            <h1>Historial de Pedidos</h1>
            <p>Aquí puedes ver todos los pedidos que has realizado.</p>
          </div>
        </div>

        <div *ngIf="cargando" class="text-center">
          <p>Cargando pedidos...</p>
        </div>

        <div *ngIf="error" class="text-center text-error">
          <p>{{ error }}</p>
        </div>

        <div *ngIf="!cargando && !error && pedidos.length === 0" class="text-center">
          <p>Aún no has realizado ningún pedido.</p>
        </div>

        <div *ngIf="!cargando && !error && pedidos.length > 0" class="data-table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>ID Pedido</th>
                <th>Fecha</th>
                <th>Total</th>
                <th>Nº de Artículos</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let pedido of pedidos">
                <td>{{pedido.id_pedido}}</td>
                <td>{{pedido.fecha_pedido | date:'short'}}</td>
                <td>{{pedido.total | currency:'USD'}}</td>
                <td>{{pedido.items ? pedido.items.length : 0}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </main>
    </div>
  </div>
</main>

<div id="toast-container" aria-live="polite" aria-atomic="true"></div>
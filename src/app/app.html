<header class="site-header">
	<div class="header-top">
		<div class="header-inner">
			<a class="logo" href="/">
				<img src="/Logo_Ekuamerket.svg" alt="Ekuamarket">
			</a>

			<div class="delivery-location">
				<img src="/Envio y entrega/Servientrega_Logo.svg" alt="Entrega" class="location-icon">
				<div class="location-info">
					<span class="small">Entregar en</span>
					<span class="bold">Ecuador</span>
				</div>
			</div>

			<div class="search-bar">
				<select class="search-category" [(ngModel)]="categoriaSeleccionada">
					<option value="">Todos</option>
					<option *ngFor="let cat of categorias" [value]="cat.id_categoria">{{cat.nombre}}</option>
				</select>
				<input type="search" 
					   [(ngModel)]="busqueda"
					   (keyup.enter)="buscarProductos()"
					   placeholder="Buscar productos, marcas y mÃ¡s..." 
					   aria-label="Buscar">
				<button class="search-btn" 
						(click)="buscarProductos()"
						aria-label="Buscar">
					<img src="/Lupa.svg" alt="Buscar">
				</button>
			</div>

			<nav class="header-actions">
				<a *ngIf="!isLoggedIn" class="action" routerLink="/login">
					<span class="small">Hola, IdentifÃ­cate</span>
					<span class="bold">Cuenta y listas</span>
				</a>

				<div *ngIf="isLoggedIn" class="action user-menu-wrapper">
					<button class="action user-menu-btn">
						<span class="small">Hola, {{ nombreUsuario }}</span>
						<span class="bold">Mi Cuenta â–¼</span>
					</button>
					<div class="user-dropdown">
						<div style="padding: 8px; background: #f0f0f0; font-size: 11px; border-bottom: 1px solid #ddd;">
							Debug: isAdmin={{ isAdmin }}, isLoggedIn={{ isLoggedIn }}
						</div>
						
						<a *ngIf="isAdmin" routerLink="/admin" class="dropdown-item admin-item">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
								<line x1="9" y1="9" x2="15" y2="9"></line>
								<line x1="9" y1="15" x2="15" y2="15"></line>
							</svg>
							Panel de Admin
						</a>
						
						<a routerLink="/mis-pedidos" class="dropdown-item">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
								<rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
							</svg>
							Mis Pedidos
						</a>
						
						<a routerLink="/mis-pedidos" class="dropdown-item">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<circle cx="12" cy="8" r="4"></circle>
								<path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path>
							</svg>
							Mi Perfil
						</a>
						<button (click)="logout()" class="dropdown-item logout-item">
							<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
								<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
								<polyline points="16 17 21 12 16 7"></polyline>
								<line x1="21" y1="12" x2="9" y2="12"></line>
							</svg>
							Cerrar SesiÃ³n
						</button>
					</div>
				</div>

				<a class="action" routerLink="/my-orders">
					<span class="small">Devoluciones</span>
					<span class="bold">y Pedidos</span>
				</a>
				
				<a class="action cart-link" routerLink="/carrito">
					<div class="cart-icon-wrapper">
						<img src="/Carrito.svg" alt="Carrito">
						<span class="cart-count">{{ cartCount }}</span>
					</div>
					<span class="bold cart-text">Carrito</span>
				</a>
			</nav>
		</div>
	</div>

	<div class="header-bottom">
		<div class="header-inner">
			<nav class="category-nav">
				<a href="/" class="nav-all">
					<span class="nav-icon">â˜°</span> Todos
				</a>
				<a routerLink="/trabajaparanostros">Trabaja para nosotros</a>
			</nav>
		</div>
	</div>
</header>

<main class="site-main">
	<div class="page-container">
		<router-outlet></router-outlet>
	</div>
</main>

<footer class="site-footer">
	<div class="footer-top">
		<div class="footer-inner">
		<div class="footer-column">
			<h4><strong>ConÃ³cenos</strong></h4>
			<a routerLink="/sobre-ekuamarket"><strong>Sobre Ekuamarket</strong></a>
			<a routerLink="/trabajaparanostros"><strong>Trabaja para nosotros</strong></a>
		</div>
			<div class="footer-column">
				<h4><strong>MÃ©todos de pago</strong></h4>
				<a routerLink="/metodos_de_pago">
					<img src="/Metodos de pagos ,credito y efectivo/Visa_Logo.svg" alt="Visa" class="payment-logo">
				</a>
				<a routerLink="/metodos_de_pago">
					<img src="/Metodos de pagos ,credito y efectivo/Mastercard_Logo.svg" alt="Mastercard" class="payment-logo">
				</a>
				<a routerLink="/trasferenciabancaria"><strong>Transferencias Bancarias</strong></a>
			</div>
			<div class="footer-column">
				<h4><strong>Ayuda</strong></h4>
				<a routerLink="/mis-pedidos"><strong>Mis pedidos</strong></a>
			</div>
		</div>
	</div>
	
	<div class="footer-middle">
		<div class="footer-inner">
			<div class="footer-brand">
				<img src="/Logo_Ekuamerket.svg" alt="Ekuamarket">
			</div>
		</div>
	</div>

	<div class="footer-bottom">
		<div class="footer-inner">
			<div class="footer-links-bottom">
				<a routerLink="/privacidad">PolÃ­tica de Privacidad</a>
			</div>
			<p class="footer-copyright">Â© 2025 Ekuamarket Science - InnovaciÃ³n desde Ecuador ðŸ‡ªðŸ‡¨</p>
		</div>
	</div>
</footer>